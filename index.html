<?php
/* Template Name: Page Loader + Game (Eitaa MiniApp) */
?><!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>Ø¯Ø± Ø­Ø§Ù„ ÙˆØ±ÙˆØ¯...</title>

<!-- ÙÙˆÙ†Øª ÙˆØ²ÛŒØ± -->
<link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font@v30.1.0/dist/font-face.css" rel="stylesheet">

<!-- SDK Ø§ÛŒØªØ§ -->
<script src="https://developer.eitaa.com/eitaa-web-app.js"></script>

<style>
html, body {
  margin:0;
  padding:0;
  height:100%;
  overflow:hidden;
  background:#121621;
  font-family:Vazir, sans-serif;
}

.loader-wrapper {
  position: fixed;
  inset:0;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  background:#121621;
  text-align:center;
  padding:20px;
  z-index:10;
}

.loader-title {
  font-size:32px;
  color:#00bfff;
  margin-bottom:30px;
  text-shadow:0 0 10px #2760fe,0 0 20px #2f71ff;
}

.glow-loader {
  width:150px;
  height:150px;
  border-radius:50%;
  background:linear-gradient(45deg,#2760fe,#2f71ff);
  animation: glowEffect 2s ease-in-out infinite, spinEffect 5s linear infinite;
  display:flex;
  justify-content:center;
  align-items:center;
}

.glow-loader span {
  color:#00bfff;
  font-size:28px;
  font-weight:bold;
  animation: textWaveEffect 1.5s ease-in-out infinite alternate;
}

.background-particles {
  position:absolute;
  inset:-50%;
  background-image: radial-gradient(circle,#ff6a00 1px,transparent 1px);
  background-size:20px 20px;
  animation: moveParticles 10s linear infinite;
  opacity:0.25;
  z-index:1;
}

#game-container {
  position: fixed;
  inset:0;
  display: none;
  background:#000;
  z-index:5;
}

#game-frame {
  width:100%;
  height:100%;
  border:0;
}

#rotate-hint {
  position:fixed;
  inset:0;
  background:#121621;
  color:#00bfff;
  display:flex;
  justify-content:center;
  align-items:center;
  text-align:center;
  font-size:20px;
  padding:20px;
  z-index:99999;
}

/* ÙˆÙ‚ØªÛŒ Ø§ÙÙ‚ÛŒ Ø´Ø¯ Ù¾ÛŒØ§Ù… Ù†Ø±Ù‡ */
@media screen and (orientation: landscape){
  #rotate-hint { display:none; }
}

@keyframes glowEffect{
  0%{box-shadow:0 0 5px #2760fe,0 0 10px #2f71ff;}
  50%{box-shadow:0 0 20px #2f71ff,0 0 30px #2760fe;}
  100%{box-shadow:0 0 5px #2760fe,0 0 10px #2f71ff;}
}

@keyframes textWaveEffect{
  0%{text-shadow:0 0 5px #00bfff;}
  100%{text-shadow:0 0 20px #2f71ff;}
}

@keyframes moveParticles{
  0%{transform:translate(0,0) rotate(0deg);}
  50%{transform:translate(-50%,-50%) rotate(180deg);}
  100%{transform:translate(0,0) rotate(360deg);}
}

</style>
</head>

<body>

<div class="loader-wrapper" id="loader">
  <h1 class="loader-title">Ø¢Ú˜Ø§Ù†Ø³ Ø·Ø±Ø§Ø­ÛŒ Ø³Ø§ÛŒØª Ù¾Ø±ÙˆÚ˜Ù‡ Ø¯Ø§Øª Ø¢ÛŒ Ø¢Ø±ØŒ Ù¾Ù„ØªÙØ±Ù… Ø¬Ø§Ù…Ø¹ Ø®Ø¯Ù…Ø§Øª Ø¯ÛŒØ¬ÛŒØªØ§Ù„</h1>
  <div class="glow-loader"><span>Ù¾Ø±ÙˆÚ˜Ù‡ Ø¯Ø§Øª Ø¢ÛŒ Ø¢Ø±</span></div>
  <div class="background-particles"></div>
</div>

<div id="rotate-hint">ğŸ“± Ù„Ø·ÙØ§Ù‹ Ú¯ÙˆØ´ÛŒ Ø±Ø§ Ø§ÙÙ‚ÛŒ Ú©Ù†ÛŒØ¯</div>

<div id="game-container">
  <iframe id="game-frame" src="" allowfullscreen scrolling="no"></iframe>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {

  // Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ SDK Ø§ÛŒØªØ§
  if(window.Eitaa && Eitaa.WebApp){
    Eitaa.WebApp.ready();
  }

  // ØªØ§Ø¨Ø¹ ÙÙˆÙ„â€ŒØ§Ø³Ú©Ø±ÛŒÙ† Ùˆ Ù‚ÙÙ„ Ø§ÙÙ‚ÛŒ Ø¯Ø§Ø®Ù„ Ø§ÛŒØªØ§
  function enableFullscreenAndLandscape(){
    if(window.Eitaa && Eitaa.WebApp){
      Eitaa.WebApp.requestFullscreen();
      Eitaa.WebApp.lockOrientation();
    }
  }

  // Ù„Ù…Ø³ ÛŒØ§ Ú©Ù„ÛŒÚ© Ø§ÙˆÙ„ÛŒÙ‡ Ø¨Ø±Ø§ÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„
  document.addEventListener("touchstart", enableFullscreenAndLandscape, {once:true});
  document.addEventListener("click", enableFullscreenAndLandscape, {once:true});

  // Ø¨Ø±Ø±Ø³ÛŒ ØªØºÛŒÛŒØ± Ø¬Ù‡Øª
  function checkOrientation(){
    const hint = document.getElementById("rotate-hint");
    if(window.matchMedia("(orientation: landscape)").matches){
      hint.style.display="none";
    } else {
      hint.style.display="flex";
    }
  }
  window.addEventListener("orientationchange", checkOrientation);
  window.addEventListener("resize", checkOrientation);

  // Ø¨Ø¹Ø¯ Ø§Ø² Ù„ÙˆØ¯Ø±
  setTimeout(function(){
    document.getElementById('loader').style.display='none';
    var gameFrame = document.getElementById('game-frame');
    gameFrame.src="https://www.madkidgames.com/full/jungle-hill-climb-racing";
    document.getElementById('game-container').style.display='block';
    enableFullscreenAndLandscape();
    checkOrientation();
  },8500);

});
</script>

</body>
</html>
